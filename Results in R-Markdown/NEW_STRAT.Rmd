---
output: 
  pdf_document:
    keep_tex: true
    fig_caption: true
    latex_engine: xelatex
mainfont: Times New Roman
geometry: "left = 2.5cm, right = 2.5cm, top = 2.5cm, bottom = 2.5cm"
header-includes:
  - \usepackage[fontsize=11pt]{scrextend}
  - \usepackage{setspace}\spacing{1.5}
  - \usepackage{placeins}
  - \DeclareMathOperator*{\maximum}{max}
  - \usepackage{soul}
  - \usepackage{color}
  - \usepackage{floatrow}
  - \floatsetup[figure]{capposition=top}    
  - \setlength\LTleft\fill
  - \setlength\LTright\fill
  - \usepackage{float}
  - \floatplacement{figure}{H}
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(ggplot2) 
library(gridExtra)
library(knitr)
library('pacman')
library(kableExtra)
p_load(dplyr, forcats, knitr, kableExtra, tinytex, janitor)
```
## BASE CASE MODEL
```{r df HPT, results='axis'}
df_HPT <- data.frame(
  KEY = c("TRAINING WINDOW", "VALIDATION WINDOW", "TESTING WINDOW", "LAG (SEQUENCE)", "NEURONS", "OPTIMIZER", "LEARNING RATE", "# OF HIDDEN LAYERS", "DROPOUT", "BATCH SIZE", "ACTIVATION FUNCTIONS", "LOSS FUNCTION", "EPOCH", "PATIENCE", "COMBINATIONS", "# OF TRIALS", "AR DEGREE (p)", "I DEGREE (I)", "MA DEGREE (q)"),
  VALUE = c("1000", "250", "250", "[7,14,21]", "[25,50,75,100,250,500]", "[ADAM,NADAM,ADAGRAD]", "[0.0001,0.01]", "[0,1]", "0.075", "32", "tanh", "mean_squared_error", "100", "10", "216", "20", "0-6", "1", "0-6")
)


kable(df_HPT, "pipe", col.names = c("" , "VALUE"), align = "c", caption = 'Parameters Used', padding = -3L)
```
The inputs used are: CLOSING PRICE, VOLUME, REALIZED HISTORICAL VOLATILITY (VIX IN CASE OF S&P 500), RESIDUALS OF ARIMA (IN CASE OF LSTM-ARIMA)

The best model by the following procedure:

 1. During Random Search, choose the 5 models with the lowest validation loss.
 2. Calculate IR2 for the training data and the validation data and calculate the absolute difference.
 3. The *BEST MODEL* was the one with the lowest absolute value and where the IR2 for the Validation data set was *NOT* equal to *ZERO*.

\pagebreak

# S&P 500
```{r fig_1, fig.cap="The Long-Only and Long-Short Strategy on S&P 500", fig.width=10, fig.height=7, results='hide'}
#...... S&P 500 Long-Only ..........#

df_SnP_ARIMA_1 <- read.csv('../ARIMA/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_ARIMA_1 <- data.frame(Date = as.Date(df_SnP_ARIMA_1$Date), Value = df_SnP_ARIMA_1$strategy)

df_SnP_LSTM_1 <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_1 <- data.frame(Date = as.Date(df_SnP_LSTM_1$Date), Value = df_SnP_LSTM_1$strategy)

df_SnP_ARIMA_LSTM_1 <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_ARIMA_LSTM_1 <- data.frame(Date = as.Date(df_SnP_ARIMA_LSTM_1$Date), Value = df_SnP_ARIMA_LSTM_1$strategy)

df_Benchmark_SnP <- read.csv('../ARIMA-LSTM/RESULTS/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_SnP <- data.frame(Date = as.Date(df_Benchmark_SnP$Date), Value = df_Benchmark_SnP$buy_n_hold)


ec_base_model_SnP_LO <- ggplot() +
  geom_line(data = df_Benchmark_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_ARIMA_1, aes(x = Date, y = Value, color = "ARIMA")) +
  geom_line(data = df_SnP_LSTM_1, aes(x = Date, y = Value, color = "LSTM")) +
  geom_line(data = df_SnP_ARIMA_LSTM_1, aes(x = Date, y = Value, color = "LSTM-ARIMA")) + #"ARIMA",
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "ARIMA", "LSTM", "LSTM-ARIMA")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
    ) + ylab('Equity')

#...... S&P 500 Long-Short ..........#
df_SnP_ARIMA_LS_1 <- read.csv('../ARIMA/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_ARIMA_LS_1 <- data.frame(Date = as.Date(df_SnP_ARIMA_LS_1$Date), Value = df_SnP_ARIMA_LS_1$strategy)

df_SnP_LSTM_LS_1 <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_LS_1 <- data.frame(Date = as.Date(df_SnP_LSTM_LS_1$Date), Value = df_SnP_LSTM_LS_1$strategy)

df_SnP_ARIMA_LSTM_LS_1 <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_ARIMA_LSTM_LS_1 <- data.frame(Date = as.Date(df_SnP_ARIMA_LSTM_LS_1$Date), Value = df_SnP_ARIMA_LSTM_LS_1$strategy)

df_Benchmark_LS_1_SnP <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_SnP <- data.frame(Date = as.Date(df_Benchmark_LS_1_SnP$Date), Value = df_Benchmark_LS_1_SnP$buy_n_hold)


ec_base_model_LS_SnP <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_ARIMA_LS_1, aes(x = Date, y = Value, color = "ARIMA")) +
  geom_line(data = df_SnP_LSTM_LS_1, aes(x = Date, y = Value, color = "LSTM")) +
  geom_line(data = df_SnP_ARIMA_LSTM_LS_1, aes(x = Date, y = Value, color = "LSTM-ARIMA")) + # "S&P 500", "ARIMA", "LSTM", "LSTM-ARIMA"
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "ARIMA", "LSTM", "LSTM-ARIMA")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
    ) + ylab('Equity')

ec_base_model_SnP_LO <- ec_base_model_SnP_LO + theme(axis.title.x = element_blank(),
                                               axis.title.y = element_blank())
ec_base_model_LS_SnP <- ec_base_model_LS_SnP + theme(axis.title.x = element_blank(),
                                               axis.title.y = element_blank())


grid.arrange(ec_base_model_SnP_LO, ec_base_model_LS_SnP, nrow=2)

```

\renewcommand{\arraystretch}{0.72}
\fontsize{8}{10}\selectfont
```{r perf_metric_SnP_LO, results='asis', fig.align='center'}

##### LONG-ONLY S&P500 #####
perf_metrics_base_model_L_O <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/S&P 500/RANDOM_SEARCH_1/df_perf_metr_LO.csv')
perf_metrics_base_model_L_O[is.na(perf_metrics_base_model_L_O)] <- ""

##### LONG-SHORT S&P500 #####
perf_metrics_base_model_LS <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/S&P 500/RANDOM_SEARCH_1/df_perf_metr_LS.csv')
perf_metrics_base_model_LS[is.na(perf_metrics_base_model_LS)] <- ""

perf_metrics_base_model_LO_LS_SnP <- bind_rows(perf_metrics_base_model_L_O, perf_metrics_base_model_LS)

# Create a Markdown table
kable(perf_metrics_base_model_LO_LS_SnP, format = "simple", col.names = c("" , "", "ARC(%)", "ASD(%)", "MD(%)", "MLD", "IR*(%)", "IR**(%)"), caption = 'Performance metrics for S&P 500')
```
\normalsize

\pagebreak

# FTSE 100

```{r fig_2, fig.cap="The Long-Only and Long-Short Strategy on FTSE 100", fig.width=10, fig.height=7, results='hide'}
#...... FTSE 100 Long-Only ..........#

df_FTSE_ARIMA_1 <- read.csv('../ARIMA/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_ARIMA_1 <- data.frame(Date = as.Date(df_FTSE_ARIMA_1$Date), Value = df_FTSE_ARIMA_1$strategy)

df_FTSE_LSTM_1 <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_1$Date), Value = df_FTSE_LSTM_1$strategy)

df_FTSE_ARIMA_LSTM_1 <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_ARIMA_LSTM_1 <- data.frame(Date = as.Date(df_FTSE_ARIMA_LSTM_1$Date), Value = df_FTSE_ARIMA_LSTM_1$strategy)

df_Benchmark_FTSE <- read.csv('../ARIMA-LSTM/RESULTS/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_FTSE <- data.frame(Date = as.Date(df_Benchmark_FTSE$Date), Value = df_Benchmark_FTSE$buy_n_hold)


ec_base_model_FTSE_LO <- ggplot() +
  geom_line(data = df_Benchmark_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_ARIMA_1, aes(x = Date, y = Value, color = "ARIMA")) +
  geom_line(data = df_FTSE_LSTM_1, aes(x = Date, y = Value, color = "LSTM")) +
  geom_line(data = df_FTSE_ARIMA_LSTM_1, aes(x = Date, y = Value, color = "LSTM-ARIMA")) + 
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "ARIMA", "LSTM", "LSTM-ARIMA")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
    ) + ylab('Equity')

#...... FTSE 100 Long-Short ..........#
df_FTSE_ARIMA_LS_1 <- read.csv('../ARIMA/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_ARIMA_LS_1 <- data.frame(Date = as.Date(df_FTSE_ARIMA_LS_1$Date), Value = df_FTSE_ARIMA_LS_1$strategy)

df_FTSE_LSTM_LS_1 <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_LS_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_LS_1$Date), Value = df_FTSE_LSTM_LS_1$strategy)

df_FTSE_ARIMA_LSTM_LS_1 <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_ARIMA_LSTM_LS_1 <- data.frame(Date = as.Date(df_FTSE_ARIMA_LSTM_LS_1$Date), Value = df_FTSE_ARIMA_LSTM_LS_1$strategy)

df_Benchmark_LS_1_FTSE <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_FTSE <- data.frame(Date = as.Date(df_Benchmark_LS_1_FTSE$Date), Value = df_Benchmark_LS_1_FTSE$buy_n_hold)


ec_base_model_LS_FTSE <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_ARIMA_LS_1, aes(x = Date, y = Value, color = "ARIMA")) +
  geom_line(data = df_FTSE_LSTM_LS_1, aes(x = Date, y = Value, color = "LSTM")) +
  geom_line(data = df_FTSE_ARIMA_LSTM_LS_1, aes(x = Date, y = Value, color = "LSTM-ARIMA")) + # "FTSE 100", "ARIMA", "LSTM", "LSTM-ARIMA"
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "ARIMA", "LSTM", "LSTM-ARIMA")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
    ) + ylab('Equity')

ec_base_model_FTSE_LO <- ec_base_model_FTSE_LO + theme(axis.title.x = element_blank(),
                                               axis.title.y = element_blank())
ec_base_model_LS_FTSE <- ec_base_model_LS_FTSE + theme(axis.title.x = element_blank(),
                                               axis.title.y = element_blank())


grid.arrange(ec_base_model_FTSE_LO, ec_base_model_LS_FTSE, nrow=2)

```

\renewcommand{\arraystretch}{0.72}
\fontsize{8}{10}\selectfont
```{r perf_metric_FTSE_LO, results='asis'}
##### LONG-ONLY FTSE100 #####
perf_metrics_base_model_L_O <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/FTSE 100/RANDOM_SEARCH_1/df_perf_metr_LO.csv')
perf_metrics_base_model_L_O[is.na(perf_metrics_base_model_L_O)] <- ""

##### LONG-SHORT FTSE100 #####
perf_metrics_base_model_LS <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/FTSE 100/RANDOM_SEARCH_1/df_perf_metr_LS.csv')
perf_metrics_base_model_LS[is.na(perf_metrics_base_model_LS)] <- ""

perf_metrics_base_model_LO_LS_FTSE <- bind_rows(perf_metrics_base_model_L_O, perf_metrics_base_model_LS)

# Create a Markdown table
kable(perf_metrics_base_model_LO_LS_FTSE, format = "simple", col.names = c("" , "", "ARC(%)", "ASD(%)", "MD(%)", "MLD", "IR*(%)", "IR**(%)"), caption = 'Performance metrics for FTSE 100', align = 'c')
```

\pagebreak

# CAC 40

```{r fig_3, fig.cap="The Long-Only and Long-Short Strategy on CAC 40", fig.width=10, fig.height=7, results='hide'}
#...... CAC 40 Long-Only ..........#

df_CAC_ARIMA_1 <- read.csv('../ARIMA/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_ARIMA_1 <- data.frame(Date = as.Date(df_CAC_ARIMA_1$Date), Value = df_CAC_ARIMA_1$strategy)

df_CAC_LSTM_1 <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_1 <- data.frame(Date = as.Date(df_CAC_LSTM_1$Date), Value = df_CAC_LSTM_1$strategy)

df_CAC_ARIMA_LSTM_1 <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_ARIMA_LSTM_1 <- data.frame(Date = as.Date(df_CAC_ARIMA_LSTM_1$Date), Value = df_CAC_ARIMA_LSTM_1$strategy)

df_Benchmark_CAC <- read.csv('../ARIMA-LSTM/RESULTS/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_CAC <- data.frame(Date = as.Date(df_Benchmark_CAC$Date), Value = df_Benchmark_CAC$buy_n_hold)


ec_base_model_CAC_LO <- ggplot() +
  geom_line(data = df_Benchmark_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_ARIMA_1, aes(x = Date, y = Value, color = "ARIMA")) +
  geom_line(data = df_CAC_LSTM_1, aes(x = Date, y = Value, color = "LSTM")) +
  geom_line(data = df_CAC_ARIMA_LSTM_1, aes(x = Date, y = Value, color = "LSTM-ARIMA")) + 
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "ARIMA", "LSTM", "LSTM-ARIMA")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
    ) + ylab('Equity')

#...... CAC 40 Long-Short ..........#
df_CAC_ARIMA_LS_1 <- read.csv('../ARIMA/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_ARIMA_LS_1 <- data.frame(Date = as.Date(df_CAC_ARIMA_LS_1$Date), Value = df_CAC_ARIMA_LS_1$strategy)

df_CAC_LSTM_LS_1 <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_LS_1 <- data.frame(Date = as.Date(df_CAC_LSTM_LS_1$Date), Value = df_CAC_LSTM_LS_1$strategy)

df_CAC_ARIMA_LSTM_LS_1 <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_ARIMA_LSTM_LS_1 <- data.frame(Date = as.Date(df_CAC_ARIMA_LSTM_LS_1$Date), Value = df_CAC_ARIMA_LSTM_LS_1$strategy)

df_Benchmark_LS_1_CAC <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_CAC <- data.frame(Date = as.Date(df_Benchmark_LS_1_CAC$Date), Value = df_Benchmark_LS_1_CAC$buy_n_hold)


ec_base_model_LS_CAC <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_ARIMA_LS_1, aes(x = Date, y = Value, color = "ARIMA")) +
  geom_line(data = df_CAC_LSTM_LS_1, aes(x = Date, y = Value, color = "LSTM")) +
  geom_line(data = df_CAC_ARIMA_LSTM_LS_1, aes(x = Date, y = Value, color = "LSTM-ARIMA")) + # "CAC 40", "ARIMA", "LSTM", "LSTM-ARIMA"
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "ARIMA", "LSTM", "LSTM-ARIMA")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
    ) + ylab('Equity')

ec_base_model_CAC_LO <- ec_base_model_CAC_LO + theme(axis.title.x = element_blank(),
                                               axis.title.y = element_blank())
ec_base_model_LS_CAC <- ec_base_model_LS_CAC + theme(axis.title.x = element_blank(),
                                               axis.title.y = element_blank())


grid.arrange(ec_base_model_CAC_LO, ec_base_model_LS_CAC, nrow=2)

```

\renewcommand{\arraystretch}{0.72}
\fontsize{8}{10}\selectfont
```{r perf_metric_CAC_LO, results='asis'}
##### LONG-ONLY CAC40 #####
perf_metrics_base_model_L_O <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/CAC 40/RANDOM_SEARCH_1/df_perf_metr_LO.csv')
perf_metrics_base_model_L_O[is.na(perf_metrics_base_model_L_O)] <- ""

##### LONG-SHORT CAC40 #####
perf_metrics_base_model_LS <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/CAC 40/RANDOM_SEARCH_1/df_perf_metr_LS.csv')
perf_metrics_base_model_LS[is.na(perf_metrics_base_model_LS)] <- ""

perf_metrics_base_model_LO_LS_CAC <- bind_rows(perf_metrics_base_model_L_O, perf_metrics_base_model_LS)

# Create a Markdown table
kable(perf_metrics_base_model_LO_LS_CAC, format = "simple", col.names = c("" , "", "ARC(%)", "ASD(%)", "MD(%)", "MLD", "IR*(%)", "IR**(%)"), caption = 'Performance statistics for CAC 40', align = 'c')
```
\normalsize

```{r SENS ARIMA ALL INDICES, results='hide', fig.cap = "ARIMA Sensitivity Analaysis", fig.width=12, fig.height=12}
#...... S&P 500 Long-Only ..........#

df_SnP_LSTM_1 <- read.csv('../ARIMA/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_1 <- data.frame(Date = as.Date(df_SnP_LSTM_1$Date), Value = df_SnP_LSTM_1$strategy)

df_Benchmark_SnP <- read.csv('../ARIMA-LSTM/RESULTS/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_SnP <- data.frame(Date = as.Date(df_Benchmark_SnP$Date), Value = df_Benchmark_SnP$buy_n_hold)

df_SnP_LSTM_SENS_B <- read.csv('../ARIMA/Results/S&P500/Sensitivity Analysis/SENS_B/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_SENS_B <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_B$Date), Value = df_SnP_LSTM_SENS_B$strategy)

df_SnP_LSTM_SENS_C<- read.csv('../ARIMA/Results/S&P500/Sensitivity Analysis/SENS_C/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_SENS_C <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_C$Date), Value = df_SnP_LSTM_SENS_C$strategy)

ec_base_model_SnP_LO_SENS_ARIMA <- ggplot() +
  geom_line(data = df_Benchmark_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_LSTM_1, aes(x = Date, y = Value, color = "Base Case")) +
  geom_line(data = df_SnP_LSTM_SENS_B, aes(x = Date, y = Value, color = "Order Range = {0-6,1,0-6}")) +
  geom_line(data = df_SnP_LSTM_SENS_C, aes(x = Date, y = Value, color = "Information Criterion = BIC")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "Base Case", "Order Range = {0-6,1,0-6}", "Information Criterion = BIC")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... S&P 500 Long-Short ..........#
df_SnP_LSTM_LS_1 <- read.csv('../ARIMA/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_LS_1 <- data.frame(Date = as.Date(df_SnP_LSTM_LS_1$Date), Value = df_SnP_LSTM_LS_1$strategy)

df_Benchmark_LS_1_SnP <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_SnP <- data.frame(Date = as.Date(df_Benchmark_LS_1_SnP$Date), Value = df_Benchmark_LS_1_SnP$buy_n_hold)

df_SnP_LSTM_SENS_B_LS <- read.csv('../ARIMA/Results/S&P500/Sensitivity Analysis/SENS_B/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_SENS_B_LS <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_B_LS$Date), Value = df_SnP_LSTM_SENS_B_LS$strategy)

df_SnP_LSTM_SENS_C_LS <- read.csv('../ARIMA/Results/S&P500/Sensitivity Analysis/SENS_C/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_SENS_C_LS <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_C_LS$Date), Value = df_SnP_LSTM_SENS_C_LS$strategy)

ec_base_model_SnP_LS_SENS_ARIMA <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case")) +
  geom_line(data = df_SnP_LSTM_SENS_B_LS, aes(x = Date, y = Value, color = "Order Range = {0-6,1,0-6}")) +
  geom_line(data = df_SnP_LSTM_SENS_C_LS, aes(x = Date, y = Value, color = "Information Criterion = BIC")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "Base Case",  "Order Range = {0-6,1,0-6}", "Information Criterion = BIC")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


#...... FTSE 100 Long-Only ..........#

df_FTSE_LSTM_1 <- read.csv('../ARIMA/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_1$Date), Value = df_FTSE_LSTM_1$strategy)

df_Benchmark_FTSE <- read.csv('../ARIMA-LSTM/RESULTS/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_FTSE <- data.frame(Date = as.Date(df_Benchmark_FTSE$Date), Value = df_Benchmark_FTSE$buy_n_hold)

df_FTSE_LSTM_SENS_B <- read.csv('../ARIMA/Results/FTSE100/Sensitivity Analysis/SENS_B/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_SENS_B <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_B$Date), Value = df_FTSE_LSTM_SENS_B$strategy)

df_FTSE_LSTM_SENS_C<- read.csv('../ARIMA/Results/FTSE100/Sensitivity Analysis/SENS_C/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_SENS_C <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_C$Date), Value = df_FTSE_LSTM_SENS_C$strategy)

ec_base_model_FTSE_LO_SENS_ARIMA <- ggplot() +
  geom_line(data = df_Benchmark_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_LSTM_1, aes(x = Date, y = Value, color = "Base Case")) +
  geom_line(data = df_FTSE_LSTM_SENS_B, aes(x = Date, y = Value, color = "Order Range = {0-6,1,0-6}")) +
  geom_line(data = df_FTSE_LSTM_SENS_C, aes(x = Date, y = Value, color = "Information Criterion = BIC")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "Base Case",  "Order Range = {0-6,1,0-6}", "Information Criterion = BIC")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... FTSE 100 Long-Short ..........#
df_FTSE_LSTM_LS_1 <- read.csv('../ARIMA/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_LS_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_LS_1$Date), Value = df_FTSE_LSTM_LS_1$strategy)

df_Benchmark_LS_1_FTSE <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_FTSE <- data.frame(Date = as.Date(df_Benchmark_LS_1_FTSE$Date), Value = df_Benchmark_LS_1_FTSE$buy_n_hold)

df_FTSE_LSTM_SENS_B_LS <- read.csv('../ARIMA/Results/FTSE100/Sensitivity Analysis/SENS_B/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_SENS_B_LS <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_B_LS$Date), Value = df_FTSE_LSTM_SENS_B_LS$strategy)

df_FTSE_LSTM_SENS_C_LS <- read.csv('../ARIMA/Results/FTSE100/Sensitivity Analysis/SENS_C/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_SENS_C_LS <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_C_LS$Date), Value = df_FTSE_LSTM_SENS_C_LS$strategy)

ec_base_model_FTSE_LS_SENS_ARIMA <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case")) +
  geom_line(data = df_FTSE_LSTM_SENS_B_LS, aes(x = Date, y = Value, color = "Order Range = {0-6,1,0-6}")) +
  geom_line(data = df_FTSE_LSTM_SENS_C_LS, aes(x = Date, y = Value, color = "Information Criterion = BIC")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "Base Case",  "Order Range = {0-6,1,0-6}", "Information Criterion = BIC")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

ec_base_model_SnP_LO_SENS_ARIMA <- ec_base_model_SnP_LO_SENS_ARIMA + theme(axis.title.x = element_blank(),
                                                                           axis.title.y = element_blank())
ec_base_model_SnP_LS_SENS_ARIMA <- ec_base_model_SnP_LS_SENS_ARIMA + theme(axis.title.x = element_blank(),
                                                                           axis.title.y = element_blank())

ec_base_model_FTSE_LO_SENS_ARIMA <- ec_base_model_FTSE_LO_SENS_ARIMA + theme(axis.title.x = element_blank(),
                                                                             axis.title.y = element_blank())
ec_base_model_FTSE_LS_SENS_ARIMA <- ec_base_model_FTSE_LS_SENS_ARIMA + theme(axis.title.x = element_blank(),
                                                                             axis.title.y = element_blank())

#...... CAC 40 Long-Only ..........#

df_CAC_LSTM_1 <- read.csv('../ARIMA/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_1 <- data.frame(Date = as.Date(df_CAC_LSTM_1$Date), Value = df_CAC_LSTM_1$strategy)

df_Benchmark_CAC <- read.csv('../ARIMA-LSTM/RESULTS/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_CAC <- data.frame(Date = as.Date(df_Benchmark_CAC$Date), Value = df_Benchmark_CAC$buy_n_hold)

df_CAC_LSTM_SENS_B <- read.csv('../ARIMA/Results/CAC/Sensitivity Analysis/SENS_B/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_SENS_B <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_B$Date), Value = df_CAC_LSTM_SENS_B$strategy)

df_CAC_LSTM_SENS_C<- read.csv('../ARIMA/Results/CAC/Sensitivity Analysis/SENS_C/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_SENS_C <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_C$Date), Value = df_CAC_LSTM_SENS_C$strategy)

ec_base_model_CAC_LO_SENS_ARIMA <- ggplot() +
  geom_line(data = df_Benchmark_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_LSTM_1, aes(x = Date, y = Value, color = "Base Case")) +
  geom_line(data = df_CAC_LSTM_SENS_B, aes(x = Date, y = Value, color = "Order Range = {0-6,1,0-6}")) +
  geom_line(data = df_CAC_LSTM_SENS_C, aes(x = Date, y = Value, color = "Information Criterion = BIC")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "Base Case",  "Order Range = {0-6,1,0-6}", "Information Criterion = BIC")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... CAC 40 Long-Short ..........#
df_CAC_LSTM_LS_1 <- read.csv('../ARIMA/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_LS_1 <- data.frame(Date = as.Date(df_CAC_LSTM_LS_1$Date), Value = df_CAC_LSTM_LS_1$strategy)

df_Benchmark_LS_1_CAC <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_CAC <- data.frame(Date = as.Date(df_Benchmark_LS_1_CAC$Date), Value = df_Benchmark_LS_1_CAC$buy_n_hold)

df_CAC_LSTM_SENS_B_LS <- read.csv('../ARIMA/Results/CAC/Sensitivity Analysis/SENS_B/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_SENS_B_LS <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_B_LS$Date), Value = df_CAC_LSTM_SENS_B_LS$strategy)

df_CAC_LSTM_SENS_C_LS <- read.csv('../ARIMA/Results/CAC/Sensitivity Analysis/SENS_C/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_SENS_C_LS <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_C_LS$Date), Value = df_CAC_LSTM_SENS_C_LS$strategy)

ec_base_model_CAC_LS_SENS_ARIMA <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case")) +
  geom_line(data = df_CAC_LSTM_SENS_B_LS, aes(x = Date, y = Value, color = "Order Range = {0-6,1,0-6}")) +
  geom_line(data = df_CAC_LSTM_SENS_C_LS, aes(x = Date, y = Value, color = "Information Criterion = BIC")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "Base Case",  "Order Range = {0-6,1,0-6}", "Information Criterion = BIC")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

ec_base_model_CAC_LO_SENS_ARIMA <- ec_base_model_CAC_LO_SENS_ARIMA + theme(axis.title.x = element_blank(),
                                                                           axis.title.y = element_blank())
ec_base_model_CAC_LS_SENS_ARIMA <- ec_base_model_CAC_LS_SENS_ARIMA + theme(axis.title.x = element_blank(),
                                                                           axis.title.y = element_blank())


grid.arrange(ec_base_model_SnP_LO_SENS_ARIMA, ec_base_model_SnP_LS_SENS_ARIMA, ec_base_model_FTSE_LO_SENS_ARIMA, ec_base_model_FTSE_LS_SENS_ARIMA, ec_base_model_CAC_LO_SENS_ARIMA, ec_base_model_CAC_LS_SENS_ARIMA, ncol=2)
```

\pagebreak
\renewcommand{\arraystretch}{0.72}
\fontsize{8}{10}\selectfont
```{r SENS_perf_metric__LO_LS _ARIMA_ for all indices, results='asis'}
##### LONG-ONLY S&P500 #####
perf_metrics_base_model_L_O_SnP <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/S&P 500/df_perf_metr_LO_ARIMA.csv')
perf_metrics_base_model_L_O_SnP[is.na(perf_metrics_base_model_L_O_SnP)] <- ""

##### LONG-SHORT S&P500 #####
perf_metrics_base_model_LS_SnP <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/S&P 500/df_perf_metr_LS_ARIMA.csv')
perf_metrics_base_model_LS_SnP[is.na(perf_metrics_base_model_LS_SnP)] <- ""

##### LONG-ONLY FTSE100 #####
perf_metrics_base_model_L_O_FTSE <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/FTSE 100/df_perf_metr_LO_ARIMA.csv')
perf_metrics_base_model_L_O_FTSE[is.na(perf_metrics_base_model_L_O_FTSE)] <- ""

##### LONG-SHORT FTSE100 #####
perf_metrics_base_model_LS_FTSE <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/FTSE 100/df_perf_metr_LS_ARIMA.csv')
perf_metrics_base_model_LS_FTSE[is.na(perf_metrics_base_model_LS_FTSE)] <- ""

##### LONG-ONLY CAC40 #####
perf_metrics_base_model_L_O_CAC <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/CAC 40/df_perf_metr_LO_ARIMA.csv')
perf_metrics_base_model_L_O_CAC[is.na(perf_metrics_base_model_L_O_CAC)] <- ""

##### LONG-SHORT CAC40 #####
perf_metrics_base_model_LS_CAC <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/CAC 40/df_perf_metr_LS_ARIMA.csv')
perf_metrics_base_model_LS_CAC[is.na(perf_metrics_base_model_LS_CAC)] <- ""

perf_metrics_base_model_LO_LS <- bind_rows(perf_metrics_base_model_L_O_SnP, perf_metrics_base_model_LS_SnP, perf_metrics_base_model_L_O_FTSE, perf_metrics_base_model_LS_FTSE, perf_metrics_base_model_L_O_CAC, perf_metrics_base_model_LS_CAC)

# Create a Markdown table
kable(perf_metrics_base_model_LO_LS, format = "simple", col.names = c("" , "", "ARC(%)", "ASD(%)", "MD(%)", "MLD", "IR*", "IR**"), caption = 'ARIMA Sensitivity Analysis performance metrics', align = 'c')
```



\pagebreak

# SENSITIVITY ANALYSIS LSTM
```{r SENS LSTM, results='hide', fig.cap="LSTM Sensitivity Analysis for S&P 500", fig.width=10, fig.height=13}
#...... S&P 500 Long-Only ..........#

df_SnP_LSTM_1 <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_1 <- data.frame(Date = as.Date(df_SnP_LSTM_1$Date), Value = df_SnP_LSTM_1$strategy)

df_Benchmark_SnP <- read.csv('../LSTM/RESULTS/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_SnP <- data.frame(Date = as.Date(df_Benchmark_SnP$Date), Value = df_Benchmark_SnP$buy_n_hold)

df_SnP_LSTM_SENS_1 <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_SENS_1 <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_1$Date), Value = df_SnP_LSTM_SENS_1$strategy)

df_SnP_LSTM_SENS_1A <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_SENS_1A <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_1A$Date), Value = df_SnP_LSTM_SENS_1A$strategy)

ec_base_model_SnP_LO_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_LSTM_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_SnP_LSTM_SENS_1, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_SnP_LSTM_SENS_1A, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... S&P 500 Long-Short ..........#
df_SnP_LSTM_LS_1 <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_LS_1 <- data.frame(Date = as.Date(df_SnP_LSTM_LS_1$Date), Value = df_SnP_LSTM_LS_1$strategy)

df_Benchmark_LS_1_SnP <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_SnP <- data.frame(Date = as.Date(df_Benchmark_LS_1_SnP$Date), Value = df_Benchmark_LS_1_SnP$buy_n_hold)

df_SnP_LSTM_SENS_1_LS <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_SENS_1_LS <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_1_LS$Date), Value = df_SnP_LSTM_SENS_1_LS$strategy)

df_SnP_LSTM_SENS_1A_LS <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_SENS_1A_LS <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_1A_LS$Date), Value = df_SnP_LSTM_SENS_1A_LS$strategy)


ec_base_model_SnP_LS_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_SnP_LSTM_SENS_1_LS, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_SnP_LSTM_SENS_1A_LS, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


#...... S&P 500 Long-Only ..........#

df_SnP_LSTM_1 <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_1 <- data.frame(Date = as.Date(df_SnP_LSTM_1$Date), Value = df_SnP_LSTM_1$strategy)

df_Benchmark_SnP <- read.csv('../LSTM/RESULTS/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_SnP <- data.frame(Date = as.Date(df_Benchmark_SnP$Date), Value = df_Benchmark_SnP$buy_n_hold)

df_SnP_LSTM_SENS_2 <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_SENS_2 <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_2$Date), Value = df_SnP_LSTM_SENS_2$strategy)

df_SnP_LSTM_SENS_2A <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_SENS_2A <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_2A$Date), Value = df_SnP_LSTM_SENS_2A$strategy)

ec_base_model_SnP_LO_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_LSTM_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_SnP_LSTM_SENS_2, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  geom_line(data = df_SnP_LSTM_SENS_2A, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... S&P 500 Long-Short ..........#
df_SnP_LSTM_LS_1 <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_LS_1 <- data.frame(Date = as.Date(df_SnP_LSTM_LS_1$Date), Value = df_SnP_LSTM_LS_1$strategy)

df_Benchmark_LS_1_SnP <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_SnP <- data.frame(Date = as.Date(df_Benchmark_LS_1_SnP$Date), Value = df_Benchmark_LS_1_SnP$buy_n_hold)

df_SnP_LSTM_SENS_2_LS <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_SENS_2_LS <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_2_LS$Date), Value = df_SnP_LSTM_SENS_2_LS$strategy)

df_SnP_LSTM_SENS_2A_LS <- read.csv('../LSTM/Results/S&P500/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_SENS_2A_LS <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_2A_LS$Date), Value = df_SnP_LSTM_SENS_2A_LS$strategy)


ec_base_model_SnP_LS_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_SnP_LSTM_SENS_2_LS, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  geom_line(data = df_SnP_LSTM_SENS_2A_LS, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


ec_base_model_SnP_LO_SENS_1 <- ec_base_model_SnP_LO_SENS_1 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())
ec_base_model_SnP_LS_SENS_1 <- ec_base_model_SnP_LS_SENS_1 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())

ec_base_model_SnP_LO_SENS_2 <- ec_base_model_SnP_LO_SENS_2 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())
ec_base_model_SnP_LS_SENS_2 <- ec_base_model_SnP_LS_SENS_2 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())

#...... FTSE 100 Long-Only ..........#

df_FTSE_LSTM_1 <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_1$Date), Value = df_FTSE_LSTM_1$strategy)

df_Benchmark_FTSE <- read.csv('../LSTM/RESULTS/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_FTSE <- data.frame(Date = as.Date(df_Benchmark_FTSE$Date), Value = df_Benchmark_FTSE$buy_n_hold)

df_FTSE_LSTM_SENS_1 <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_SENS_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_1$Date), Value = df_FTSE_LSTM_SENS_1$strategy)

df_FTSE_LSTM_SENS_1A <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_SENS_1A <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_1A$Date), Value = df_FTSE_LSTM_SENS_1A$strategy)

ec_base_model_FTSE_LO_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_LSTM_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_FTSE_LSTM_SENS_1, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_FTSE_LSTM_SENS_1A, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... FTSE 100 Long-Short ..........#
df_FTSE_LSTM_LS_1 <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_LS_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_LS_1$Date), Value = df_FTSE_LSTM_LS_1$strategy)

df_Benchmark_LS_1_FTSE <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_FTSE <- data.frame(Date = as.Date(df_Benchmark_LS_1_FTSE$Date), Value = df_Benchmark_LS_1_FTSE$buy_n_hold)

df_FTSE_LSTM_SENS_1_LS <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_SENS_1_LS <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_1_LS$Date), Value = df_FTSE_LSTM_SENS_1_LS$strategy)

df_FTSE_LSTM_SENS_1A_LS <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_SENS_1A_LS <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_1A_LS$Date), Value = df_FTSE_LSTM_SENS_1A_LS$strategy)


ec_base_model_FTSE_LS_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_FTSE_LSTM_SENS_1_LS, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_FTSE_LSTM_SENS_1A_LS, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


#...... FTSE 100 Long-Only ..........#

df_FTSE_LSTM_1 <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_1$Date), Value = df_FTSE_LSTM_1$strategy)

df_Benchmark_FTSE <- read.csv('../LSTM/RESULTS/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_FTSE <- data.frame(Date = as.Date(df_Benchmark_FTSE$Date), Value = df_Benchmark_FTSE$buy_n_hold)

df_FTSE_LSTM_SENS_2 <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_SENS_2 <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_2$Date), Value = df_FTSE_LSTM_SENS_2$strategy)

df_FTSE_LSTM_SENS_2A <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_SENS_2A <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_2A$Date), Value = df_FTSE_LSTM_SENS_2A$strategy)

ec_base_model_FTSE_LO_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_LSTM_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_FTSE_LSTM_SENS_2, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  geom_line(data = df_FTSE_LSTM_SENS_2A, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... FTSE 100 Long-Short ..........#
df_FTSE_LSTM_LS_1 <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_LS_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_LS_1$Date), Value = df_FTSE_LSTM_LS_1$strategy)

df_Benchmark_LS_1_FTSE <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_FTSE <- data.frame(Date = as.Date(df_Benchmark_LS_1_FTSE$Date), Value = df_Benchmark_LS_1_FTSE$buy_n_hold)

df_FTSE_LSTM_SENS_2_LS <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_SENS_2_LS <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_2_LS$Date), Value = df_FTSE_LSTM_SENS_2_LS$strategy)

df_FTSE_LSTM_SENS_2A_LS <- read.csv('../LSTM/Results/FTSE100/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_SENS_2A_LS <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_2A_LS$Date), Value = df_FTSE_LSTM_SENS_2A_LS$strategy)


ec_base_model_FTSE_LS_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_FTSE_LSTM_SENS_2_LS, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  geom_line(data = df_FTSE_LSTM_SENS_2A_LS, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


ec_base_model_FTSE_LO_SENS_1 <- ec_base_model_FTSE_LO_SENS_1 + theme(axis.title.x = element_blank(),
                                                                     axis.title.y = element_blank())
ec_base_model_FTSE_LS_SENS_1 <- ec_base_model_FTSE_LS_SENS_1 + theme(axis.title.x = element_blank(),
                                                                     axis.title.y = element_blank())

ec_base_model_FTSE_LO_SENS_2 <- ec_base_model_FTSE_LO_SENS_2 + theme(axis.title.x = element_blank(),
                                                                     axis.title.y = element_blank())
ec_base_model_FTSE_LS_SENS_2 <- ec_base_model_FTSE_LS_SENS_2 + theme(axis.title.x = element_blank(),
                                                                     axis.title.y = element_blank())

#...... CAC 40 Long-Only ..........#

df_CAC_LSTM_1 <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_1 <- data.frame(Date = as.Date(df_CAC_LSTM_1$Date), Value = df_CAC_LSTM_1$strategy)

df_Benchmark_CAC <- read.csv('../LSTM/RESULTS/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_CAC <- data.frame(Date = as.Date(df_Benchmark_CAC$Date), Value = df_Benchmark_CAC$buy_n_hold)

df_CAC_LSTM_SENS_1 <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_SENS_1 <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_1$Date), Value = df_CAC_LSTM_SENS_1$strategy)

df_CAC_LSTM_SENS_1A <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_SENS_1A <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_1A$Date), Value = df_CAC_LSTM_SENS_1A$strategy)

ec_base_model_CAC_LO_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_LSTM_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_CAC_LSTM_SENS_1, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_CAC_LSTM_SENS_1A, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... CAC 40 Long-Short ..........#
df_CAC_LSTM_LS_1 <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_LS_1 <- data.frame(Date = as.Date(df_CAC_LSTM_LS_1$Date), Value = df_CAC_LSTM_LS_1$strategy)

df_Benchmark_LS_1_CAC <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_CAC <- data.frame(Date = as.Date(df_Benchmark_LS_1_CAC$Date), Value = df_Benchmark_LS_1_CAC$buy_n_hold)

df_CAC_LSTM_SENS_1_LS <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_SENS_1_LS <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_1_LS$Date), Value = df_CAC_LSTM_SENS_1_LS$strategy)

df_CAC_LSTM_SENS_1A_LS <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_SENS_1A_LS <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_1A_LS$Date), Value = df_CAC_LSTM_SENS_1A_LS$strategy)


ec_base_model_CAC_LS_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_CAC_LSTM_SENS_1_LS, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_CAC_LSTM_SENS_1A_LS, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


#...... CAC 40 Long-Only ..........#

df_CAC_LSTM_1 <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_1 <- data.frame(Date = as.Date(df_CAC_LSTM_1$Date), Value = df_CAC_LSTM_1$strategy)

df_Benchmark_CAC <- read.csv('../LSTM/RESULTS/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_CAC <- data.frame(Date = as.Date(df_Benchmark_CAC$Date), Value = df_Benchmark_CAC$buy_n_hold)

df_CAC_LSTM_SENS_2 <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_SENS_2 <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_2$Date), Value = df_CAC_LSTM_SENS_2$strategy)

df_CAC_LSTM_SENS_2A <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_SENS_2A <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_2A$Date), Value = df_CAC_LSTM_SENS_2A$strategy)

ec_base_model_CAC_LO_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_LSTM_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_CAC_LSTM_SENS_2, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  #geom_line(data = df_CAC_LSTM_SENS_2A, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... CAC 40 Long-Short ..........#
df_CAC_LSTM_LS_1 <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_LS_1 <- data.frame(Date = as.Date(df_CAC_LSTM_LS_1$Date), Value = df_CAC_LSTM_LS_1$strategy)

df_Benchmark_LS_1_CAC <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_CAC <- data.frame(Date = as.Date(df_Benchmark_LS_1_CAC$Date), Value = df_Benchmark_LS_1_CAC$buy_n_hold)

df_CAC_LSTM_SENS_2_LS <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_SENS_2_LS <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_2_LS$Date), Value = df_CAC_LSTM_SENS_2_LS$strategy)

df_CAC_LSTM_SENS_2A_LS <- read.csv('../LSTM/Results/CAC/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_SENS_2A_LS <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_2A_LS$Date), Value = df_CAC_LSTM_SENS_2A_LS$strategy)


ec_base_model_CAC_LS_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_CAC_LSTM_SENS_2_LS, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  #geom_line(data = df_CAC_LSTM_SENS_2A_LS, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


ec_base_model_CAC_LO_SENS_1 <- ec_base_model_CAC_LO_SENS_1 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())
ec_base_model_CAC_LS_SENS_1 <- ec_base_model_CAC_LS_SENS_1 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())

ec_base_model_CAC_LO_SENS_2 <- ec_base_model_CAC_LO_SENS_2 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())
ec_base_model_CAC_LS_SENS_2 <- ec_base_model_CAC_LS_SENS_2 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())

grid.arrange(ec_base_model_SnP_LO_SENS_1, ec_base_model_SnP_LS_SENS_1, ec_base_model_SnP_LO_SENS_2, ec_base_model_SnP_LS_SENS_2, ec_base_model_FTSE_LO_SENS_1, ec_base_model_FTSE_LS_SENS_1, ec_base_model_FTSE_LO_SENS_2, ec_base_model_FTSE_LS_SENS_2, ec_base_model_CAC_LO_SENS_1, ec_base_model_CAC_LS_SENS_1, ec_base_model_CAC_LO_SENS_2, ec_base_model_CAC_LS_SENS_2, ncol=2)

```
\pagebreak


\renewcommand{\arraystretch}{0.72}
\fontsize{8}{10}\selectfont
```{r SENS_perf_metric__LO_LS LSTM for all indices, results='asis'}
##### LONG-ONLY S&P500 #####
perf_metrics_base_model_L_O_SnP <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/S&P 500/df_perf_metr_LO_LSTM.csv')
perf_metrics_base_model_L_O_SnP[is.na(perf_metrics_base_model_L_O_SnP)] <- ""

##### LONG-SHORT S&P500 #####
perf_metrics_base_model_LS_SnP <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/S&P 500/df_perf_metr_LS_LSTM.csv')
perf_metrics_base_model_LS_SnP[is.na(perf_metrics_base_model_LS_SnP)] <- ""

##### LONG-ONLY FTSE100 #####
perf_metrics_base_model_L_O_FTSE <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/FTSE 100/df_perf_metr_LO_LSTM.csv')
perf_metrics_base_model_L_O_FTSE[is.na(perf_metrics_base_model_L_O_FTSE)] <- ""

##### LONG-SHORT FTSE100 #####
perf_metrics_base_model_LS_FTSE <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/FTSE 100/df_perf_metr_LS_LSTM.csv')
perf_metrics_base_model_LS_FTSE[is.na(perf_metrics_base_model_LS_FTSE)] <- ""

##### LONG-ONLY CAC40 #####
perf_metrics_base_model_L_O_CAC <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/CAC 40/df_perf_metr_LO_LSTM.csv')
perf_metrics_base_model_L_O_CAC[is.na(perf_metrics_base_model_L_O_CAC)] <- ""

##### LONG-SHORT CAC40 #####
perf_metrics_base_model_LS_CAC <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/CAC 40/df_perf_metr_LS_LSTM.csv')
perf_metrics_base_model_LS_CAC[is.na(perf_metrics_base_model_LS_CAC)] <- ""

perf_metrics_base_model_LO_LS <- bind_rows(perf_metrics_base_model_L_O_SnP, perf_metrics_base_model_LS_SnP, perf_metrics_base_model_L_O_FTSE, perf_metrics_base_model_LS_FTSE, perf_metrics_base_model_L_O_CAC, perf_metrics_base_model_LS_CAC)

# Create a Markdown table
kable(perf_metrics_base_model_LO_LS, format = "simple", col.names = c("" , "", "ARC(%)", "ASD(%)", "MD(%)", "MLD", "IR*", "IR**"), caption = 'LSTM-ARIMA Sensitivity Analysis performance metrics', align = 'c')
```

\pagebreak
# SENSITIVITY ANALYSIS ARIMA-LSTM


```{r SENS LSTM-ARIMA, results='hide', fig.cap="LSTM-ARIMA Sensitivity Analysis for S&P 500", fig.width=10, fig.height=13}
#...... S&P 500 Long-Only ..........#

df_SnP_LSTM_1 <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_1 <- data.frame(Date = as.Date(df_SnP_LSTM_1$Date), Value = df_SnP_LSTM_1$strategy)

df_Benchmark_SnP <- read.csv('../ARIMA-LSTM/RESULTS/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_SnP <- data.frame(Date = as.Date(df_Benchmark_SnP$Date), Value = df_Benchmark_SnP$buy_n_hold)

df_SnP_LSTM_SENS_1 <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_SENS_1 <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_1$Date), Value = df_SnP_LSTM_SENS_1$strategy)

df_SnP_LSTM_SENS_1A <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_SENS_1A <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_1A$Date), Value = df_SnP_LSTM_SENS_1A$strategy)

ec_base_model_SnP_LO_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_LSTM_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_SnP_LSTM_SENS_1, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_SnP_LSTM_SENS_1A, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... S&P 500 Long-Short ..........#
df_SnP_LSTM_LS_1 <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_LS_1 <- data.frame(Date = as.Date(df_SnP_LSTM_LS_1$Date), Value = df_SnP_LSTM_LS_1$strategy)

df_Benchmark_LS_1_SnP <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_SnP <- data.frame(Date = as.Date(df_Benchmark_LS_1_SnP$Date), Value = df_Benchmark_LS_1_SnP$buy_n_hold)

df_SnP_LSTM_SENS_1_LS <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_SENS_1_LS <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_1_LS$Date), Value = df_SnP_LSTM_SENS_1_LS$strategy)

df_SnP_LSTM_SENS_1A_LS <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_SENS_1A_LS <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_1A_LS$Date), Value = df_SnP_LSTM_SENS_1A_LS$strategy)


ec_base_model_SnP_LS_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_SnP_LSTM_SENS_1_LS, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_SnP_LSTM_SENS_1A_LS, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


#...... S&P 500 Long-Only ..........#

df_SnP_LSTM_1 <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_1 <- data.frame(Date = as.Date(df_SnP_LSTM_1$Date), Value = df_SnP_LSTM_1$strategy)

df_Benchmark_SnP <- read.csv('../ARIMA-LSTM/RESULTS/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_SnP <- data.frame(Date = as.Date(df_Benchmark_SnP$Date), Value = df_Benchmark_SnP$buy_n_hold)

df_SnP_LSTM_SENS_2 <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_SENS_2 <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_2$Date), Value = df_SnP_LSTM_SENS_2$strategy)

df_SnP_LSTM_SENS_2A <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LO_MAIN.csv')
df_SnP_LSTM_SENS_2A <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_2A$Date), Value = df_SnP_LSTM_SENS_2A$strategy)

ec_base_model_SnP_LO_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_LSTM_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_SnP_LSTM_SENS_2, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  geom_line(data = df_SnP_LSTM_SENS_2A, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... S&P 500 Long-Short ..........#
df_SnP_LSTM_LS_1 <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_LS_1 <- data.frame(Date = as.Date(df_SnP_LSTM_LS_1$Date), Value = df_SnP_LSTM_LS_1$strategy)

df_Benchmark_LS_1_SnP <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_SnP <- data.frame(Date = as.Date(df_Benchmark_LS_1_SnP$Date), Value = df_Benchmark_LS_1_SnP$buy_n_hold)

df_SnP_LSTM_SENS_2_LS <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_SENS_2_LS <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_2_LS$Date), Value = df_SnP_LSTM_SENS_2_LS$strategy)

df_SnP_LSTM_SENS_2A_LS <- read.csv('../ARIMA-LSTM/Results/S&P500/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LS_MAIN.csv')
df_SnP_LSTM_SENS_2A_LS <- data.frame(Date = as.Date(df_SnP_LSTM_SENS_2A_LS$Date), Value = df_SnP_LSTM_SENS_2A_LS$strategy)


ec_base_model_SnP_LS_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_SnP, aes(x = Date, y = Value, color = "S&P 500")) +
  geom_line(data = df_SnP_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_SnP_LSTM_SENS_2_LS, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  geom_line(data = df_SnP_LSTM_SENS_2A_LS, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("S&P 500", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


ec_base_model_SnP_LO_SENS_1 <- ec_base_model_SnP_LO_SENS_1 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())
ec_base_model_SnP_LS_SENS_1 <- ec_base_model_SnP_LS_SENS_1 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())

ec_base_model_SnP_LO_SENS_2 <- ec_base_model_SnP_LO_SENS_2 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())
ec_base_model_SnP_LS_SENS_2 <- ec_base_model_SnP_LS_SENS_2 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())

#...... FTSE 100 Long-Only ..........#

df_FTSE_LSTM_1 <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_1$Date), Value = df_FTSE_LSTM_1$strategy)

df_Benchmark_FTSE <- read.csv('../ARIMA-LSTM/RESULTS/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_FTSE <- data.frame(Date = as.Date(df_Benchmark_FTSE$Date), Value = df_Benchmark_FTSE$buy_n_hold)

df_FTSE_LSTM_SENS_1 <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_SENS_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_1$Date), Value = df_FTSE_LSTM_SENS_1$strategy)

df_FTSE_LSTM_SENS_1A <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_SENS_1A <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_1A$Date), Value = df_FTSE_LSTM_SENS_1A$strategy)

ec_base_model_FTSE_LO_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_LSTM_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_FTSE_LSTM_SENS_1, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_FTSE_LSTM_SENS_1A, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... FTSE 100 Long-Short ..........#
df_FTSE_LSTM_LS_1 <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_LS_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_LS_1$Date), Value = df_FTSE_LSTM_LS_1$strategy)

df_Benchmark_LS_1_FTSE <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_FTSE <- data.frame(Date = as.Date(df_Benchmark_LS_1_FTSE$Date), Value = df_Benchmark_LS_1_FTSE$buy_n_hold)

df_FTSE_LSTM_SENS_1_LS <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_SENS_1_LS <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_1_LS$Date), Value = df_FTSE_LSTM_SENS_1_LS$strategy)

df_FTSE_LSTM_SENS_1A_LS <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_SENS_1A_LS <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_1A_LS$Date), Value = df_FTSE_LSTM_SENS_1A_LS$strategy)


ec_base_model_FTSE_LS_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_FTSE_LSTM_SENS_1_LS, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_FTSE_LSTM_SENS_1A_LS, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


#...... FTSE 100 Long-Only ..........#

df_FTSE_LSTM_1 <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_1$Date), Value = df_FTSE_LSTM_1$strategy)

df_Benchmark_FTSE <- read.csv('../ARIMA-LSTM/RESULTS/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_FTSE <- data.frame(Date = as.Date(df_Benchmark_FTSE$Date), Value = df_Benchmark_FTSE$buy_n_hold)

df_FTSE_LSTM_SENS_2 <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_SENS_2 <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_2$Date), Value = df_FTSE_LSTM_SENS_2$strategy)

df_FTSE_LSTM_SENS_2A <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LO_MAIN.csv')
df_FTSE_LSTM_SENS_2A <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_2A$Date), Value = df_FTSE_LSTM_SENS_2A$strategy)

ec_base_model_FTSE_LO_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_LSTM_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_FTSE_LSTM_SENS_2, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  geom_line(data = df_FTSE_LSTM_SENS_2A, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... FTSE 100 Long-Short ..........#
df_FTSE_LSTM_LS_1 <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_LS_1 <- data.frame(Date = as.Date(df_FTSE_LSTM_LS_1$Date), Value = df_FTSE_LSTM_LS_1$strategy)

df_Benchmark_LS_1_FTSE <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/RANDOM_SEARCH_1A/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_FTSE <- data.frame(Date = as.Date(df_Benchmark_LS_1_FTSE$Date), Value = df_Benchmark_LS_1_FTSE$buy_n_hold)

df_FTSE_LSTM_SENS_2_LS <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_SENS_2_LS <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_2_LS$Date), Value = df_FTSE_LSTM_SENS_2_LS$strategy)

df_FTSE_LSTM_SENS_2A_LS <- read.csv('../ARIMA-LSTM/Results/FTSE100/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LS_MAIN.csv')
df_FTSE_LSTM_SENS_2A_LS <- data.frame(Date = as.Date(df_FTSE_LSTM_SENS_2A_LS$Date), Value = df_FTSE_LSTM_SENS_2A_LS$strategy)


ec_base_model_FTSE_LS_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_FTSE, aes(x = Date, y = Value, color = "FTSE 100")) +
  geom_line(data = df_FTSE_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_FTSE_LSTM_SENS_2_LS, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  geom_line(data = df_FTSE_LSTM_SENS_2A_LS, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("FTSE 100", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


ec_base_model_FTSE_LO_SENS_1 <- ec_base_model_FTSE_LO_SENS_1 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())
ec_base_model_FTSE_LS_SENS_1 <- ec_base_model_FTSE_LS_SENS_1 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())

ec_base_model_FTSE_LO_SENS_2 <- ec_base_model_FTSE_LO_SENS_2 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())
ec_base_model_FTSE_LS_SENS_2 <- ec_base_model_FTSE_LS_SENS_2 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())

#...... CAC 40 Long-Only ..........#

df_CAC_LSTM_1 <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_1 <- data.frame(Date = as.Date(df_CAC_LSTM_1$Date), Value = df_CAC_LSTM_1$strategy)

df_Benchmark_CAC <- read.csv('../ARIMA-LSTM/RESULTS/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_CAC <- data.frame(Date = as.Date(df_Benchmark_CAC$Date), Value = df_Benchmark_CAC$buy_n_hold)

df_CAC_LSTM_SENS_1 <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_SENS_1 <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_1$Date), Value = df_CAC_LSTM_SENS_1$strategy)

df_CAC_LSTM_SENS_1A <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_SENS_1A <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_1A$Date), Value = df_CAC_LSTM_SENS_1A$strategy)

ec_base_model_CAC_LO_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_LSTM_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_CAC_LSTM_SENS_1, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_CAC_LSTM_SENS_1A, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... CAC 40 Long-Short ..........#
df_CAC_LSTM_LS_1 <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_LS_1 <- data.frame(Date = as.Date(df_CAC_LSTM_LS_1$Date), Value = df_CAC_LSTM_LS_1$strategy)

df_Benchmark_LS_1_CAC <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_CAC <- data.frame(Date = as.Date(df_Benchmark_LS_1_CAC$Date), Value = df_Benchmark_LS_1_CAC$buy_n_hold)

df_CAC_LSTM_SENS_1_LS <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/SENS_1/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_SENS_1_LS <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_1_LS$Date), Value = df_CAC_LSTM_SENS_1_LS$strategy)

df_CAC_LSTM_SENS_1A_LS <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/SENS_1A/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_SENS_1A_LS <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_1A_LS$Date), Value = df_CAC_LSTM_SENS_1A_LS$strategy)


ec_base_model_CAC_LS_SENS_1 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Dropout = 0.075")) +
  geom_line(data = df_CAC_LSTM_SENS_1_LS, aes(x = Date, y = Value, color = "Dropout = 0.05")) +
  geom_line(data = df_CAC_LSTM_SENS_1A_LS, aes(x = Date, y = Value, color = "Dropout = 0.1")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "Base Case Dropout = 0.075", "Dropout = 0.05", "Dropout = 0.1")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


#...... CAC 40 Long-Only ..........#

df_CAC_LSTM_1 <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_1 <- data.frame(Date = as.Date(df_CAC_LSTM_1$Date), Value = df_CAC_LSTM_1$strategy)

df_Benchmark_CAC <- read.csv('../ARIMA-LSTM/RESULTS/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LO_MAIN.csv')
df_Benchmark_CAC <- data.frame(Date = as.Date(df_Benchmark_CAC$Date), Value = df_Benchmark_CAC$buy_n_hold)

df_CAC_LSTM_SENS_2 <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_SENS_2 <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_2$Date), Value = df_CAC_LSTM_SENS_2$strategy)

df_CAC_LSTM_SENS_2A <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LO_MAIN.csv')
df_CAC_LSTM_SENS_2A <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_2A$Date), Value = df_CAC_LSTM_SENS_2A$strategy)

ec_base_model_CAC_LO_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_LSTM_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_CAC_LSTM_SENS_2, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  geom_line(data = df_CAC_LSTM_SENS_2A, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')

#...... CAC 40 Long-Short ..........#
df_CAC_LSTM_LS_1 <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_LS_1 <- data.frame(Date = as.Date(df_CAC_LSTM_LS_1$Date), Value = df_CAC_LSTM_LS_1$strategy)

df_Benchmark_LS_1_CAC <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/RANDOM_SEARCH_1/Visualisations/df_EC_LS_MAIN.csv')
df_Benchmark_LS_1_CAC <- data.frame(Date = as.Date(df_Benchmark_LS_1_CAC$Date), Value = df_Benchmark_LS_1_CAC$buy_n_hold)

df_CAC_LSTM_SENS_2_LS <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/SENS_2/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_SENS_2_LS <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_2_LS$Date), Value = df_CAC_LSTM_SENS_2_LS$strategy)

df_CAC_LSTM_SENS_2A_LS <- read.csv('../ARIMA-LSTM/Results/CAC/Sensitivity Analysis/SENS_2A/Visualisations/df_EC_LS_MAIN.csv')
df_CAC_LSTM_SENS_2A_LS <- data.frame(Date = as.Date(df_CAC_LSTM_SENS_2A_LS$Date), Value = df_CAC_LSTM_SENS_2A_LS$strategy)


ec_base_model_CAC_LS_SENS_2 <- ggplot() +
  geom_line(data = df_Benchmark_LS_1_CAC, aes(x = Date, y = Value, color = "CAC 40")) +
  geom_line(data = df_CAC_LSTM_LS_1, aes(x = Date, y = Value, color = "Base Case Batch Size = 32")) +
  geom_line(data = df_CAC_LSTM_SENS_2_LS, aes(x = Date, y = Value, color = "Batch Size = 16")) +
  geom_line(data = df_CAC_LSTM_SENS_2A_LS, aes(x = Date, y = Value, color = "Batch Size = 64")) +
  scale_color_manual(values = c("darkorange", "darkblue", "darkgreen", "darkred"), name='Strategy', limits=c("CAC 40", "Base Case Batch Size = 32", "Batch Size = 16", "Batch Size = 64")) + theme_bw() + theme(
    legend.position = c(.02, .98),
    legend.justification = c("left", "top"),
    legend.box.just = "left",
    legend.margin = margin(1, 1, 1, 1),
    legend.background = element_blank(),
    legend.box.background = element_rect(colour = "black"),
    legend.title = element_blank(), 
    legend.spacing.y = unit(0, "mm"), 
  ) + ylab('Equity')


ec_base_model_CAC_LO_SENS_1 <- ec_base_model_CAC_LO_SENS_1 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())
ec_base_model_CAC_LS_SENS_1 <- ec_base_model_CAC_LS_SENS_1 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())

ec_base_model_CAC_LO_SENS_2 <- ec_base_model_CAC_LO_SENS_2 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())
ec_base_model_CAC_LS_SENS_2 <- ec_base_model_CAC_LS_SENS_2 + theme(axis.title.x = element_blank(),
                                                                   axis.title.y = element_blank())

grid.arrange(ec_base_model_SnP_LO_SENS_1, ec_base_model_SnP_LS_SENS_1, ec_base_model_SnP_LO_SENS_2, ec_base_model_SnP_LS_SENS_2, ec_base_model_FTSE_LO_SENS_1, ec_base_model_FTSE_LS_SENS_1, ec_base_model_FTSE_LO_SENS_2, ec_base_model_FTSE_LS_SENS_2, ec_base_model_CAC_LO_SENS_1, ec_base_model_CAC_LS_SENS_1, ec_base_model_CAC_LO_SENS_2, ec_base_model_CAC_LS_SENS_2, ncol=2)

```
\pagebreak


\renewcommand{\arraystretch}{0.72}
\fontsize{8}{10}\selectfont
```{r SENS_perf_metric__LO_LS ARIMA_LSTM for all indices, results='asis'}
##### LONG-ONLY S&P500 #####
perf_metrics_base_model_L_O_SnP <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/S&P 500/df_perf_metr_LO_ARIMA_LSTM.csv')
perf_metrics_base_model_L_O_SnP[is.na(perf_metrics_base_model_L_O_SnP)] <- ""

##### LONG-SHORT S&P500 #####
perf_metrics_base_model_LS_SnP <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/S&P 500/df_perf_metr_LS_ARIMA_LSTM.csv')
perf_metrics_base_model_LS_SnP[is.na(perf_metrics_base_model_LS_SnP)] <- ""

##### LONG-ONLY FTSE100 #####
perf_metrics_base_model_L_O_FTSE <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/FTSE 100/df_perf_metr_LO_ARIMA_LSTM.csv')
perf_metrics_base_model_L_O_FTSE[is.na(perf_metrics_base_model_L_O_FTSE)] <- ""

##### LONG-SHORT FTSE100 #####
perf_metrics_base_model_LS_FTSE <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/FTSE 100/df_perf_metr_LS_ARIMA_LSTM.csv')
perf_metrics_base_model_LS_FTSE[is.na(perf_metrics_base_model_LS_FTSE)] <- ""

##### LONG-ONLY CAC40 #####
perf_metrics_base_model_L_O_CAC <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/CAC 40/df_perf_metr_LO_ARIMA_LSTM.csv')
perf_metrics_base_model_L_O_CAC[is.na(perf_metrics_base_model_L_O_CAC)] <- ""

##### LONG-SHORT CAC40 #####
perf_metrics_base_model_LS_CAC <- read.csv('../PERFORMANCE_METRICS/PERF_METR_RESULTS/CAC 40/df_perf_metr_LS_ARIMA_LSTM.csv')
perf_metrics_base_model_LS_CAC[is.na(perf_metrics_base_model_LS_CAC)] <- ""

perf_metrics_base_model_LO_LS <- bind_rows(perf_metrics_base_model_L_O_SnP, perf_metrics_base_model_LS_SnP, perf_metrics_base_model_L_O_FTSE, perf_metrics_base_model_LS_FTSE, perf_metrics_base_model_L_O_CAC, perf_metrics_base_model_LS_CAC)

# Create a Markdown table
kable(perf_metrics_base_model_LO_LS, format = "simple", col.names = c("" , "", "ARC(%)", "ASD(%)", "MD(%)", "MLD", "IR*", "IR**"), caption = 'LSTM-ARIMA Sensitivity Analysis performance metrics', align = 'c')
```

